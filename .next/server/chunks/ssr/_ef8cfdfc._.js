module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},70025,a=>{"use strict";var b=a.i(72131),c=a.i(12794),d=a.i(18544),e=a.i(33791),f=a.i(42871),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};if(a?.type==="success"){try{this.#d.onSuccess?.(a.data,b,c,d)}catch(a){Promise.reject(a)}try{this.#d.onSettled?.(a.data,null,b,c,d)}catch(a){Promise.reject(a)}}else if(a?.type==="error"){try{this.#d.onError?.(a.error,b,c,d)}catch(a){Promise.reject(a)}try{this.#d.onSettled?.(void 0,a.error,b,c,d)}catch(a){Promise.reject(a)}}}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(37927);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],70025)},19e3,a=>{"use strict";var b=a.i(87924),c=a.i(33217),d=a.i(70025),e=a.i(37927),f=a.i(63222),g=a.i(70382),h=a.i(31850),i=a.i(70106);let j=(0,i.default)("thumbs-up",[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]]),k=(0,i.default)("thumbs-down",[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]]);var l=a.i(52495),m=a.i(72131);function n({sub:a,onVote:c,userVote:d,isConnected:e}){let[f,g]=(0,m.useState)(!1),i=async b=>{g(!0),await c(a.id,b),g(!1)};return(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 rounded-lg border border-border bg-card p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.TokenImage,{src:a.image,alt:a.name,symbol:a.symbol,className:"h-12 w-12 rounded-full object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.pairLabel&&(0,b.jsx)("span",{className:"rounded border border-border px-1.5 py-0.5 text-[10px] uppercase text-muted-foreground",children:a.pairLabel}),(0,b.jsx)("span",{className:"font-semibold",children:a.quoteSymbol?`${a.symbol} / ${a.quoteSymbol}`:a.symbol}),(0,b.jsx)("span",{className:"rounded bg-muted px-1.5 py-0.5 text-xs",children:a.name}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground capitalize",children:["(",a.status,")"]})]}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:["by ",a.submittedBy.slice(0,8),"..."]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString()})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>i(1),disabled:f||!e,className:`rounded p-2 transition-colors ${1===d?"bg-emerald-500/30 text-emerald-400":"hover:bg-muted text-muted-foreground"}`,title:"Upvote",children:(0,b.jsx)(j,{className:"h-4 w-4"})}),(0,b.jsx)("span",{className:"min-w-[2rem] text-center font-medium tabular-nums",children:a.voteCount}),(0,b.jsx)("button",{type:"button",onClick:()=>i(-1),disabled:f||!e,className:`rounded p-2 transition-colors ${-1===d?"bg-rose-500/30 text-rose-400":"hover:bg-muted text-muted-foreground"}`,title:"Downvote",children:(0,b.jsx)(k,{className:"h-4 w-4"})})]}),(0,b.jsx)("a",{href:a.dexScreenerUrl,target:"_blank",rel:"noopener noreferrer",className:"rounded p-2 text-muted-foreground hover:bg-muted hover:text-foreground",children:(0,b.jsx)(l.ExternalLink,{className:"h-4 w-4"})})]})]})}function o(){let{address:a,isConnected:h}=(0,f.useWallet)(),i=(0,e.useQueryClient)(),{data:j,isLoading:k}=(0,c.useQuery)({queryKey:["submissions",a],queryFn:async()=>{let b=new URLSearchParams({status:"pending"});a&&b.set("wallet",a);let c=await fetch(`/api/submissions?${b}`);if(!c.ok)throw Error("Failed to fetch");return c.json()}}),l=(0,d.useMutation)({mutationFn:async({id:b,direction:c})=>{let d=await fetch(`/api/submissions/${b}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:a,direction:c})});if(!d.ok)throw Error((await d.json()).error??"Vote failed");return d.json()},onSuccess:()=>i.invalidateQueries({queryKey:["submissions"]})}),m=j?.submissions??[],o=(a,b)=>l.mutateAsync({id:a,direction:b});return(0,b.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,b.jsx)(g.Header,{}),(0,b.jsxs)("main",{className:"container mx-auto flex-1 px-4 py-8",children:[(0,b.jsx)("h1",{className:"mb-2 text-2xl font-bold",children:"Submit & Vote"}),(0,b.jsx)("p",{className:"mb-8 text-sm text-muted-foreground",children:"Pending submissions. Upvote pairs you want listed. Admin approves high-vote pairs."}),!h&&(0,b.jsx)("div",{className:"mb-6 rounded-lg border border-amber-500/50 bg-amber-500/10 px-4 py-3 text-sm",children:"Connect your wallet to vote."}),k?(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-24 animate-pulse rounded-lg border border-border bg-card"},a))}):0===m.length?(0,b.jsx)("p",{className:"text-muted-foreground",children:"No pending submissions. Submit one from the Submit page."}):(0,b.jsx)("div",{className:"space-y-4",children:m.map(a=>(0,b.jsx)(n,{sub:a,onVote:o,userVote:a.myVote,isConnected:!!h},a.id))})]})]})}a.s(["default",()=>o],19e3)}];

//# sourceMappingURL=_ef8cfdfc._.js.map