module.exports=[29782,a=>{"use strict";var b=a.i(87216),c=a.i(30557),d=a.i(85228),e=a.i(2650);class f extends d.BaseError{constructor({callbackSelector:a,cause:b,data:c,extraData:d,sender:f,urls:g}){super(b.shortMessage||"An error occurred while fetching for an offchain result.",{cause:b,metaMessages:[...b.metaMessages||[],b.metaMessages?.length?"":[],"Offchain Gateway Call:",g&&["  Gateway URL(s):",...g.map(a=>`    ${(0,e.getUrl)(a)}`)],`  Sender: ${f}`,`  Data: ${c}`,`  Callback selector: ${a}`,`  Extra data: ${d}`].flat(),name:"OffchainLookupError"})}}class g extends d.BaseError{constructor({result:a,url:b}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,e.getUrl)(b)}`,`Response: ${(0,c.stringify)(a)}`],name:"OffchainLookupResponseMalformedError"})}}class h extends d.BaseError{constructor({sender:a,to:b}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${b}`,`OffchainLookup sender address: ${a}`],name:"OffchainLookupSenderMismatchError"})}}var i=a.i(21374),j=a.i(84929),k=a.i(62029),l=a.i(61848),m=a.i(29664),n=a.i(48894),o=a.i(15521),p=a.i(90496),q=a.i(72694),r=a.i(23360),s=a.i(30944),t=a.i(56800),u=a.i(49601),v=a.i(95261);let w="/docs/contract/encodeErrorResult";function x(a){let{abi:b,errorName:c,args:d}=a,e=b[0];if(c){let a=(0,v.getAbiItem)({abi:b,args:d,name:c});if(!a)throw new q.AbiErrorNotFoundError(c,{docsPath:w});e=a}if("error"!==e.type)throw new q.AbiErrorNotFoundError(void 0,{docsPath:w});let f=(0,u.formatAbiItem)(e),g=(0,s.toFunctionSelector)(f),h="0x";if(d&&d.length>0){if(!e.inputs)throw new q.AbiErrorInputsNotFoundError(e.name,{docsPath:w});h=(0,k.encodeAbiParameters)(e.inputs,d)}return(0,m.concatHex)([g,h])}let y="/docs/contract/encodeFunctionResult",z="x-batch-gateway:true";async function A(a){let{data:b,ccipRequest:c}=a,{args:[d]}=function(a){let{abi:b,data:c}=a,d=(0,r.slice)(c,0,4),e=b.find(a=>"function"===a.type&&d===(0,s.toFunctionSelector)((0,u.formatAbiItem)(a)));if(!e)throw new q.AbiFunctionSignatureNotFoundError(d,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:e.name,args:"inputs"in e&&e.inputs&&e.inputs.length>0?(0,t.decodeAbiParameters)(e.inputs,(0,r.slice)(c,4)):void 0}}({abi:o.batchGatewayAbi,data:b}),e=[],f=[];return await Promise.all(d.map(async(a,b)=>{try{f[b]=a.urls.includes(z)?await A({data:a.data,ccipRequest:c}):await c(a),e[b]=!1}catch(a){var d;e[b]=!0,f[b]="HttpRequestError"===(d=a).name&&d.status?x({abi:o.batchGatewayAbi,errorName:"HttpError",args:[d.status,d.shortMessage]}):x({abi:[p.solidityError],errorName:"Error",args:["shortMessage"in d?d.shortMessage:d.message]})}})),function(a){let{abi:b,functionName:c,result:d}=a,e=b[0];if(c){let a=(0,v.getAbiItem)({abi:b,name:c});if(!a)throw new q.AbiFunctionNotFoundError(c,{docsPath:y});e=a}if("function"!==e.type)throw new q.AbiFunctionNotFoundError(void 0,{docsPath:y});if(!e.outputs)throw new q.AbiFunctionOutputsNotFoundError(e.name,{docsPath:y});let f=(()=>{if(0===e.outputs.length)return[];if(1===e.outputs.length)return[d];if(Array.isArray(d))return d;throw new q.InvalidArrayError(d)})();return(0,k.encodeAbiParameters)(e.outputs,f)}({abi:o.batchGatewayAbi,functionName:"query",result:[e,f]})}let B={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function C(a,{blockNumber:c,blockTag:d,data:e,to:g}){let{args:i}=(0,j.decodeErrorResult)({data:e,abi:[B]}),[n,o,p,q,r]=i,{ccipRead:s}=a,t=s&&"function"==typeof s?.request?s.request:D;try{if(!(0,l.isAddressEqual)(g,n))throw new h({sender:n,to:g});let e=o.includes(z)?await A({data:p,ccipRequest:t}):await t({data:p,sender:n,urls:o}),{data:f}=await (0,b.call)(a,{blockNumber:c,blockTag:d,data:(0,m.concat)([q,(0,k.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[e,r])]),to:g});return f}catch(a){throw new f({callbackSelector:q,cause:a,data:e,extraData:r,sender:n,urls:o})}}async function D({data:a,sender:b,urls:d}){let e=Error("An unknown error occurred.");for(let f=0;f<d.length;f++){let h=d[f],j=h.includes("{data}")?"GET":"POST",k="POST"===j?{data:a,sender:b}:void 0,l="POST"===j?{"Content-Type":"application/json"}:{};try{let d,f=await fetch(h.replace("{sender}",b.toLowerCase()).replace("{data}",a),{body:JSON.stringify(k),headers:l,method:j});if(d=f.headers.get("Content-Type")?.startsWith("application/json")?(await f.json()).data:await f.text(),!f.ok){e=new i.HttpRequestError({body:k,details:d?.error?(0,c.stringify)(d.error):f.statusText,headers:f.headers,status:f.status,url:h});continue}if(!(0,n.isHex)(d)){e=new g({result:d,url:h});continue}return d}catch(a){e=new i.HttpRequestError({body:k,details:a.message,url:h})}}throw e}a.s(["ccipRequest",()=>D,"offchainLookup",()=>C,"offchainLookupAbiItem",0,B,"offchainLookupSignature",0,"0x556f1830"],29782)},15875,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_viem__esm_utils_ccip_558fcd84.js","server/chunks/ssr/node_modules_6eee1ee0._.js","server/chunks/ssr/node_modules_abitype_dist_esm_834ead82._.js"].map(b=>a.l(b))).then(()=>b(29782)))}];

//# sourceMappingURL=node_modules_viem__esm_utils_ccip_558fcd84.js.map