{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/metta/Fomo4ClawAggregator/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = globalThis as unknown as { prisma: PrismaClient }\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///home/metta/Fomo4ClawAggregator/lib/config.ts"],"sourcesContent":["export const ADMIN_ADDRESSES = (\n  process.env.ADMIN_ADDRESSES ?? ''\n)\n  .split(',')\n  .map((a) => a.trim().toLowerCase())\n  .filter(Boolean)\n\nexport function isAdmin(address: string): boolean {\n  return ADMIN_ADDRESSES.includes(address.toLowerCase())\n}\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,kBAAkB,CAC7B,QAAQ,GAAG,CAAC,eAAe,IAAI,EACjC,EACG,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,GAAG,WAAW,IAC/B,MAAM,CAAC;AAEH,SAAS,QAAQ,OAAe;IACrC,OAAO,gBAAgB,QAAQ,CAAC,QAAQ,WAAW;AACrD"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///home/metta/Fomo4ClawAggregator/app/api/admin/submissions/%5Bid%5D/approve/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { prisma } from '@/lib/db'\nimport { isAdmin } from '@/lib/config'\n\nexport async function POST(\n  request: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const body = await request.json()\n    const { walletAddress, action } = body as {\n      walletAddress?: string\n      action?: 'approve' | 'reject'\n    }\n\n    if (!walletAddress || !isAdmin(walletAddress)) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 403 })\n    }\n    if (action !== 'approve' && action !== 'reject') {\n      return NextResponse.json(\n        { error: 'action must be approve or reject' },\n        { status: 400 }\n      )\n    }\n\n    const { id } = await params\n    const sub = await prisma.submission.findUnique({ where: { id } })\n    if (!sub) {\n      return NextResponse.json({ error: 'Not found' }, { status: 404 })\n    }\n    if (sub.status !== 'pending') {\n      return NextResponse.json(\n        { error: 'Submission already processed' },\n        { status: 400 }\n      )\n    }\n\n    await prisma.submission.update({\n      where: { id },\n      data: {\n        status: action === 'approve' ? 'approved' : 'rejected',\n        approvedAt: new Date(),\n        approvedBy: walletAddress.toLowerCase(),\n      },\n    })\n\n    return NextResponse.json({\n      status: action === 'approve' ? 'approved' : 'rejected',\n    })\n  } catch (e) {\n    console.error('Admin approve error:', e)\n    return NextResponse.json(\n      { error: 'Failed to update' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KACpB,OAAgB,EAChB,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,aAAa,EAAE,MAAM,EAAE,GAAG;QAKlC,IAAI,CAAC,iBAAiB,CAAC,IAAA,0HAAO,EAAC,gBAAgB;YAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QACA,IAAI,WAAW,aAAa,WAAW,UAAU;YAC/C,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAmC,GAC5C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,MAAM,MAAM,qHAAM,CAAC,UAAU,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE;YAAG;QAAE;QAC/D,IAAI,CAAC,KAAK;YACR,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAY,GAAG;gBAAE,QAAQ;YAAI;QACjE;QACA,IAAI,IAAI,MAAM,KAAK,WAAW;YAC5B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA+B,GACxC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,qHAAM,CAAC,UAAU,CAAC,MAAM,CAAC;YAC7B,OAAO;gBAAE;YAAG;YACZ,MAAM;gBACJ,QAAQ,WAAW,YAAY,aAAa;gBAC5C,YAAY,IAAI;gBAChB,YAAY,cAAc,WAAW;YACvC;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,QAAQ,WAAW,YAAY,aAAa;QAC9C;IACF,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAmB,GAC5B;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}